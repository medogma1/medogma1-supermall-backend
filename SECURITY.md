# إرشادات الأمان

يلتزم مشروع Super Mall Backend بالحفاظ على أمان المستخدمين والبيانات. هذا المستند يوضح سياسات الأمان الخاصة بنا وكيفية الإبلاغ عن الثغرات الأمنية.

## الإبلاغ عن الثغرات الأمنية

إذا اكتشفت ثغرة أمنية في المشروع، يرجى إبلاغنا بها عبر البريد الإلكتروني على العنوان التالي: `security@supermall.example.com`. نحن نقدر جهودك في تحسين أمان المشروع ونطلب منك:

- عدم استغلال الثغرة لأغراض غير مشروعة
- عدم الكشف عن الثغرة للعامة قبل إصلاحها
- تقديم تفاصيل كافية لإعادة إنتاج المشكلة

## سياسة الكشف المسؤول

nسنتبع هذه الخطوات عند استلام تقرير عن ثغرة أمنية:

1. تأكيد استلام التقرير خلال 48 ساعة
2. تحديد مدى خطورة الثغرة وتأثيرها
3. إصدار إصلاح مؤقت أو دائم في أقرب وقت ممكن
4. إبلاغ المستخدمين بالتحديث وتشجيعهم على تطبيقه

## أفضل ممارسات الأمان المطبقة

### المصادقة والتفويض

- استخدام JWT (JSON Web Tokens) للمصادقة
- تطبيق RBAC (التحكم في الوصول المستند إلى الأدوار)
- تخزين كلمات المرور باستخدام خوارزميات تجزئة قوية (bcrypt)
- تطبيق سياسات كلمات مرور قوية

### حماية البيانات

- تشفير البيانات الحساسة في قاعدة البيانات
- استخدام HTTPS لجميع الاتصالات
- تطبيق سياسات CORS (مشاركة الموارد عبر الأصول المختلفة)
- التحقق من صحة جميع بيانات الإدخال

### الحماية من الهجمات الشائعة

- الحماية من هجمات حقن SQL
- الحماية من هجمات XSS (البرمجة النصية عبر المواقع)
- الحماية من هجمات CSRF (تزوير الطلبات عبر المواقع)
- الحماية من هجمات حقن NoSQL

### إدارة الجلسات

- تطبيق انتهاء صلاحية الجلسات
- استخدام علامات توقيت للتوكنات
- تطبيق آلية تجديد التوكنات

### سجلات وتدقيق

- تسجيل محاولات تسجيل الدخول الفاشلة
- تسجيل الوصول إلى البيانات الحساسة
- تسجيل التغييرات في الأذونات

## إرشادات للمطورين

### التعامل مع المتغيرات البيئية

- لا تقم أبدًا بتضمين ملفات `.env` في نظام التحكم بالإصدار
- استخدم ملف `.env.example` كقالب مع قيم وهمية
- لا تخزن أبدًا المفاتيح السرية أو كلمات المرور في التعليقات أو الكود

### التعامل مع التبعيات

- تحديث التبعيات بانتظام
- استخدام أدوات فحص الثغرات الأمنية في التبعيات
- تجنب استخدام حزم مهملة أو غير مدعومة

### اختبار الأمان

- تضمين اختبارات أمان في CI/CD
- إجراء مراجعات كود منتظمة مع التركيز على الأمان
- إجراء اختبارات اختراق دورية

## قائمة التحقق من الأمان قبل النشر

- [ ] تم تحديث جميع التبعيات إلى أحدث إصدار آمن
- [ ] تم إزالة جميع المفاتيح السرية وكلمات المرور من الكود
- [ ] تم تعطيل وضع التصحيح في بيئة الإنتاج
- [ ] تم تكوين رؤوس HTTP الأمنية بشكل صحيح
- [ ] تم تعطيل رسائل الخطأ المفصلة في بيئة الإنتاج
- [ ] تم تكوين سياسات CORS بشكل صحيح
- [ ] تم تطبيق حدود معدل الطلبات
- [ ] تم تكوين جدران الحماية بشكل صحيح
- [ ] تم إعداد النسخ الاحتياطي والتعافي من الكوارث

## الموارد

- [OWASP Top Ten](https://owasp.org/www-project-top-ten/)
- [OWASP API Security Top 10](https://owasp.org/www-project-api-security/)
- [Node.js Security Best Practices](https://nodejs.org/en/security/)

## التحديثات

سيتم تحديث هذا المستند بانتظام مع تطور المشروع وظهور تهديدات أمنية جديدة.

آخر تحديث: يوليو 2023